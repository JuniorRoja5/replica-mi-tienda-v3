<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Tienda - Gestión de Enlaces y Productos</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- SortableJS -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #0d6efd;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #0dcaf0;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }

        .main-container {
            display: flex;
            min-height: 100vh;
        }

        /* Panel izquierdo - Ajustado para ser más estrecho */
        .left-panel {
            flex: 0 0 45%;
            background: white;
            border-right: 1px solid #dee2e6;
            overflow-y: auto;
        }

        .profile-header {
            padding: 2rem;
            border-bottom: 1px solid #dee2e6;
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #dee2e6;
        }

        .profile-avatar-placeholder {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #6c757d;
        }

        .profile-details h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            color: #212529;
        }

        .profile-username {
            color: #6c757d;
            margin: 0;
        }

        .profile-bio {
            margin: 0.5rem 0;
            color: #495057;
        }

        .social-icons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .social-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: white;
            font-size: 0.875rem;
        }

        .social-icon.tiktok { background-color: #000000; }
        .social-icon.spotify { background-color: #1DB954; }
        .social-icon.instagram { background-color: #E4405F; }
        .social-icon.youtube { background-color: #FF0000; }
        .social-icon.link { background-color: #6c757d; }
        .social-icon.discord { background-color: #5865F2; }
        .social-icon.twitter { background-color: #1DA1F2; }

        /* Sección de productos */
        .products-section {
            padding: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
            color: #212529;
        }

        .btn-create {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .btn-create:hover {
            background: #0b5ed7;
            color: white;
            transform: translateY(-1px);
        }

        /* Lista de productos */
        .products-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .product-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: move;
            transition: all 0.2s;
            position: relative;
        }

        .product-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .drag-handle {
            color: #6c757d;
            cursor: grab;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .product-icon {
            width: 50px;
            height: 50px;
            border-radius: 0.375rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
            flex-shrink: 0;
        }

        .product-icon.link { background: linear-gradient(135deg, #17a2b8, #138496); }
        .product-icon.product { background: linear-gradient(135deg, #28a745, #20c997); }
        .product-icon.consultation { background: linear-gradient(135deg, #ffc107, #fd7e14); }
        .product-icon.course { background: linear-gradient(135deg, #6f42c1, #e83e8c); }
        .product-icon.membership { background: linear-gradient(135deg, #6610f2, #6f42c1); }

        .product-info {
            flex: 1;
            min-width: 0;
        }

        .product-title {
            font-weight: 600;
            color: #212529;
            margin: 0;
            font-size: 0.95rem;
        }

        .product-url {
            color: #6c757d;
            font-size: 0.8rem;
            margin: 0;
            word-break: break-all;
        }

        .product-type {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        .product-type.link {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .product-type.product {
            background-color: #d4edda;
            color: #155724;
        }

        .product-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .status-indicator.active {
            background-color: #28a745;
        }

        .status-indicator.inactive {
            background-color: #6c757d;
        }

        .status-text {
            font-size: 0.8rem;
            font-weight: 500;
            color: #28a745;
        }

        .product-price {
            font-weight: 600;
            color: #212529;
            font-size: 0.9rem;
        }

        .product-sales {
            font-size: 0.8rem;
            color: #6c757d;
        }

        .product-actions {
            display: flex;
            gap: 0.25rem;
        }

        .btn-action {
            width: 32px;
            height: 32px;
            border-radius: 0.25rem;
            border: 1px solid #dee2e6;
            background: white;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            transition: all 0.2s;
            cursor: pointer;
        }

        .btn-action:hover {
            background: #f8f9fa;
            color: #495057;
        }

        .btn-action.edit:hover {
            background: #cce5ff;
            color: #0066cc;
            border-color: #99d1ff;
        }

        .btn-action.delete:hover {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c2c7;
        }

        /* Panel derecho - Ajustado para ser más grande */
        .right-panel {
            flex: 0 0 55%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .phone-mockup {
            position: relative;
        }

        .phone-frame {
            width: 380px;
            height: 760px;
            background: #2d3748;
            border-radius: 2.5rem;
            padding: 0.75rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .phone-notch {
            position: absolute;
            top: 0.5rem;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 4px;
            background: #4a5568;
            border-radius: 2px;
            z-index: 10;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #1a202c;
            border-radius: 2rem;
            overflow: hidden;
            position: relative;
        }

        .preview-content {
            height: 100%;
            overflow-y: auto;
            padding: 2rem 1.5rem;
            color: white;
        }

        .preview-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .preview-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            background: #4a5568;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            overflow: hidden;
        }

        .preview-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.25rem;
            color: white;
        }

        .preview-username {
            font-size: 0.9rem;
            color: #9CA3AF;
            margin: 0 0 0.5rem;
            font-weight: 500;
        }

        .preview-bio {
            font-size: 0.875rem;
            color: #a0aec0;
            line-height: 1.4;
        }

        .preview-social {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin: 1.5rem 0 2rem;
        }

        .preview-social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .preview-products {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .preview-product {
            background: #2d3748;
            border-radius: 0.75rem;
            padding: 1rem;
            transition: all 0.2s;
        }

        .preview-product:hover {
            background: #4a5568;
            transform: translateY(-2px);
        }

        .preview-product-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .preview-product-icon {
            width: 48px;
            height: 48px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
            flex-shrink: 0;
        }

        .preview-product-info h4 {
            font-weight: 600;
            margin: 0 0 0.25rem;
            color: white;
            font-size: 0.9rem;
        }

        .preview-product-info p {
            font-size: 0.8rem;
            color: #a0aec0;
            margin: 0;
            line-height: 1.3;
        }

        .preview-product-price {
            margin-left: auto;
            font-weight: 600;
            color: #48bb78;
            font-size: 0.9rem;
        }

        /* Estados del drag and drop */
        .sortable-ghost {
            opacity: 0.5;
            background: #f8f9fa;
            border: 2px dashed var(--primary-color);
        }

        .sortable-chosen {
            transform: rotate(2deg);
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #6c757d;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Preview info */
        .preview-info {
            text-align: center;
            margin-top: 1.5rem;
            color: white;
        }

        .preview-info p {
            margin: 0.25rem 0;
            font-size: 0.875rem;
        }

        .preview-info .small {
            font-size: 0.75rem;
            opacity: 0.8;
        }

        /* Modal personalizado para tipos de producto */
        .product-type-modal .modal-dialog {
            max-width: 600px;
        }

        .product-type-option {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .product-type-option:hover {
            background: #e9ecef;
            border-color: #dee2e6;
            transform: translateY(-2px);
        }

        .product-type-icon {
            width: 80px;
            height: 80px;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            flex-shrink: 0;
        }

        .product-type-icon.link-icon {
            background: linear-gradient(135deg, #007bff, #0056b3);
        }

        .product-type-icon.product-icon {
            background: linear-gradient(135deg, #e91e63, #ad1457);
        }

        .product-type-details h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #212529;
            margin: 0 0 0.5rem;
        }

        .product-type-details p {
            color: #6c757d;
            margin: 0;
            font-size: 1rem;
        }

        /* Modal para crear link */
        .link-form-container {
            max-width: 800px;
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .form-section h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #212529;
        }

        .auto-extract-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .auto-extract-notice i {
            color: #856404;
            font-size: 1.2rem;
        }

        .auto-extract-notice span {
            color: #856404;
            font-size: 0.9rem;
        }

        .image-upload-section {
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            padding: 1.5rem;
            background: #f8f9fa;
        }

        .image-preview-container {
            width: 120px;
            height: 120px;
            border: 2px dashed #dee2e6;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            margin-bottom: 1rem;
        }

        .image-preview-icon {
            color: #6c757d;
            font-size: 2rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #28a745;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1.5rem;
            border-top: 1px solid #dee2e6;
        }

        .btn-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            color: white;
        }

        /* Vista superpuesta para edición de perfil */
        .profile-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 45%;
            height: 100vh;
            background: white;
            z-index: 1000;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .overlay-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .overlay-header h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            color: #212529;
        }

        .btn-close-overlay {
            background: none;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            border-radius: 0.25rem;
            color: #6c757d;
            transition: all 0.2s;
        }

        .btn-close-overlay:hover {
            background: #f8f9fa;
            color: #212529;
        }

        .overlay-content {
            padding: 2rem;
        }

        .overlay-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1.5rem;
            border-top: 1px solid #dee2e6;
            margin-top: 2rem;
        }

        .social-inputs .form-label {
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .social-inputs .form-control {
            font-size: 0.875rem;
            padding: 0.5rem 0.75rem;
        }

        /* Avatar preview en el overlay */
        .avatar-upload-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .avatar-preview-container {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #dee2e6;
            overflow: hidden;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .avatar-preview-overlay {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .avatar-preview-overlay img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .avatar-placeholder {
            color: #6c757d;
            font-size: 2rem;
        }

        /* Mejorar labels de redes sociales */
        .social-inputs .form-label {
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            font-weight: 600;
            color: #495057;
        }

        .social-inputs .form-label i {
            margin-right: 0.5rem;
            width: 16px;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .left-panel {
                flex: 0 0 50%;
            }
            .right-panel {
                flex: 0 0 50%;
            }
            .phone-frame {
                width: 320px;
                height: 640px;
            }
        }

        @media (max-width: 992px) {
            .main-container {
                flex-direction: column;
            }
            
            .left-panel, .right-panel {
                flex: none;
            }
            
            .right-panel {
                min-height: 50vh;
            }
        }

        @media (max-width: 768px) {
            .profile-header, .products-section {
                padding: 1.5rem;
            }
            
            .phone-frame {
                width: 280px;
                height: 560px;
            }
            
            .right-panel {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Panel Izquierdo -->
        <div class="left-panel">
            <!-- Cabecera del Perfil -->
            <div class="profile-header">
                <div class="profile-info">
                    <div class="profile-avatar-placeholder" id="profileAvatar">
                        👤
                    </div>
                    <div class="profile-details">
                        <h2 id="profileName">Trading Sharks</h2>
                        <p class="profile-username" id="profileUsername">@tradingsharks</p>
                        <p class="profile-bio" id="profileBio">Aquí le cambia la vida 🔥📈</p>
                        <div class="social-icons" id="socialIcons">
                            <a href="#" class="social-icon tiktok" title="TikTok">
                                <i class="bi bi-tiktok"></i>
                            </a>
                            <a href="#" class="social-icon spotify" title="Spotify">
                                <i class="bi bi-spotify"></i>
                            </a>
                            <a href="#" class="social-icon instagram" title="Instagram">
                                <i class="bi bi-instagram"></i>
                            </a>
                            <a href="#" class="social-icon youtube" title="YouTube">
                                <i class="bi bi-youtube"></i>
                            </a>
                            <a href="#" class="social-icon link" title="Link">
                                <i class="bi bi-link-45deg"></i>
                            </a>
                            <a href="#" class="social-icon discord" title="Discord">
                                <i class="bi bi-discord"></i>
                            </a>
                            <a href="#" class="social-icon twitter" title="Twitter">
                                <i class="bi bi-twitter"></i>
                            </a>
                        </div>
                        <button class="btn btn-outline-secondary btn-sm mt-2" onclick="showProfileModal()">
                            <i class="bi bi-pencil"></i> Editar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sección de Productos -->
            <div class="products-section">
                <div class="section-header">
                    <h3 class="section-title">Mis Enlaces / Productos</h3>
                    <button class="btn-create" onclick="showCreateModal()">
                        <i class="bi bi-plus"></i>
                        Crear Nuevo
                    </button>
                </div>

                <div class="products-list" id="productsList">
                    <!-- Productos se cargarán dinámicamente -->
                </div>
            </div>
        </div>

        <!-- Panel Derecho - Vista Previa -->
        <div class="right-panel">
            <div>
                <div class="phone-mockup">
                    <div class="phone-frame">
                        <div class="phone-notch"></div>
                        <div class="phone-screen">
                            <div class="preview-content" id="previewContent">
                                <!-- Vista previa se cargará dinámicamente -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="preview-info">
                    <p>Vista previa en tiempo real</p>
                    <p class="small">Los cambios se reflejan automáticamente</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para seleccionar tipo de producto -->
    <div class="modal fade product-type-modal" id="productTypeModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">¿Qué quieres crear?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="product-type-option" onclick="selectProductType('link')">
                        <div class="product-type-icon link-icon">
                            <i class="bi bi-link-45deg"></i>
                        </div>
                        <div class="product-type-details">
                            <h3>Un link externo</h3>
                            <p>Dirige a tus seguidores a cualquier sitio web.</p>
                        </div>
                    </div>

                    <div class="product-type-option" onclick="selectProductType('product')">
                        <div class="product-type-icon product-icon">
                            <i class="bi bi-bag-fill"></i>
                        </div>
                        <div class="product-type-details">
                            <h3>Un producto digital</h3>
                            <p>Vende tus creaciones y recibe pagos directos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para crear link externo -->
    <div class="modal fade" id="linkFormModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">Crear Nuevo Link</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="linkForm">
                        <div class="form-section">
                            <h4>URL del Link</h4>
                            <input type="url" class="form-control form-control-lg" id="linkUrl" 
                                   placeholder="https://ejemplo.com/..." required>
                            
                            <div class="auto-extract-notice">
                                <i class="bi bi-lightbulb-fill"></i>
                                <span>La imagen y título se extraerán automáticamente del enlace</span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8">
                                <div class="form-section">
                                    <h4>Imagen del Link</h4>
                                    <div class="image-upload-section">
                                        <div class="image-preview-container" id="linkImagePreview">
                                            <i class="bi bi-image image-preview-icon"></i>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <input type="file" id="linkImageInput" accept="image/*" style="display: none;">
                                            <button type="button" class="btn btn-outline-secondary" onclick="document.getElementById('linkImageInput').click()">
                                                <i class="bi bi-upload"></i> Subir Imagen
                                            </button>
                                            <button type="button" class="btn btn-outline-primary">
                                                <i class="bi bi-search"></i> Buscar en Biblioteca
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h4>Título del Link</h4>
                                    <input type="text" class="form-control" id="linkTitle" 
                                           placeholder="Se extraerá automáticamente del enlace">
                                    <small class="form-text text-muted">Puedes editarlo manualmente si lo deseas</small>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <div class="d-flex align-items-center justify-content-between">
                                <span>Link está activo</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="linkActive" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </form>

                    <div class="action-buttons">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            Cancelar
                        </button>
                        <button type="button" class="btn btn-gradient" onclick="saveLinkProduct()">
                            Crear Link
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vista superpuesta para edición de perfil en tiempo real -->
    <div class="profile-overlay" id="profileOverlay" style="display: none;">
        <div class="overlay-header">
            <h3>Editar Perfil</h3>
            <button class="btn-close-overlay" onclick="closeProfileOverlay()">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <div class="overlay-content">
            <form id="overlayProfileForm">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">Avatar</label>
                            <div class="avatar-upload-section">
                                <div class="avatar-preview-container">
                                    <div class="avatar-preview-overlay" id="avatarPreviewOverlay">
                                        <div class="avatar-placeholder">👤</div>
                                    </div>
                                </div>
                                <input type="file" class="form-control mt-2" id="overlayAvatarInput" accept="image/*">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="overlayNameInput" value="">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Username</label>
                            <div class="input-group">
                                <span class="input-group-text">@</span>
                                <input type="text" class="form-control" id="overlayUsernameInput" value="">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">Bio</label>
                            <textarea class="form-control" id="overlayBioInput" rows="4"></textarea>
                            <div class="form-text">
                                <span id="overlayBioCounter">0</span>/160 caracteres
                            </div>
                        </div>
                        <div class="mb-3">
                            <h6>Redes Sociales</h6>
                            <div class="social-inputs" id="overlaySocialInputs">
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-tiktok"></i> TikTok
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">tiktok.com/@</span>
                                        <input type="text" class="form-control" id="overlayTiktok" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-instagram"></i> Instagram
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">instagram.com/</span>
                                        <input type="text" class="form-control" id="overlayInstagram" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-youtube"></i> YouTube
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">youtube.com/@</span>
                                        <input type="text" class="form-control" id="overlayYoutube" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-twitter"></i> Twitter/X
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">x.com/</span>
                                        <input type="text" class="form-control" id="overlayTwitter" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-facebook"></i> Facebook
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">facebook.com/</span>
                                        <input type="text" class="form-control" id="overlayFacebook" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-linkedin"></i> LinkedIn
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">linkedin.com/in/</span>
                                        <input type="text" class="form-control" id="overlayLinkedin" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-discord"></i> Discord
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">discord.com/users/</span>
                                        <input type="text" class="form-control" id="overlayDiscord" placeholder="usuario">
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">
                                        <i class="bi bi-spotify"></i> Spotify
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">open.spotify.com/user/</span>
                                        <input type="text" class="form-control" id="overlaySpotify" placeholder="usuario">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="overlay-actions">
                <button type="button" class="btn btn-secondary" onclick="closeProfileOverlay()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="saveOverlayProfile()">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!-- Modal para editar perfil -->
    <div class="modal fade" id="profileModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Editar Perfil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="profileForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Avatar</label>
                                    <input type="file" class="form-control" id="avatarInput" accept="image/*">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Nombre</label>
                                    <input type="text" class="form-control" id="nameInput" value="Trading Sharks">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Username</label>
                                    <div class="input-group">
                                        <span class="input-group-text">@</span>
                                        <input type="text" class="form-control" id="usernameInput" value="tradingsharks">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Bio</label>
                                    <textarea class="form-control" id="bioInput" rows="4">Aquí le cambia la vida 🔥📈</textarea>
                                    <div class="form-text">
                                        <span id="bioCounter">29</span>/160 caracteres
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">Guardar Cambios</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert">
            <div class="toast-body bg-success text-white d-flex align-items-center">
                <i class="bi bi-check-circle me-2"></i>
                <span id="successMessage">Operación completada exitosamente</span>
            </div>
        </div>
    </div>

    <script>
        // Funciones globales para uso en HTML
        function showProfileModal() {
            return window.MiTienda.showProfileModal();
        }
        
        function showProfileOverlay() {
            return window.MiTienda.showProfileOverlay();
        }
        
        function closeProfileOverlay() {
            return window.MiTienda.closeProfileOverlay();
        }
        
        function saveOverlayProfile() {
            return window.MiTienda.saveOverlayProfile();
        }
    </script>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript personalizado -->
    <script src="js/mi-tienda.js"></script>
</body>
</html>